@using QassimPrincipality.Application.Services.Lookups.Main.EServicesSubCategory
@using QassimPrincipality.Web.Helpers.TagHelpers
@using QassimPrincipality.Application.Services.Lookups.Main.EServiceCategory
@using QassimPrincipality.Application.Services.Lookups.Main.CommonEService
@{
    ViewBag.Title = "قائمة الخدمات الفرعية";
    Layout = "_Layout";
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">الرئيسية</a></li>
        <li class="breadcrumb-item active"> @ViewBag.Title</li>
    </ol>
</nav>

<div class="row justify-content-xxl-center">
    <div class="col-xxl-12">
        <div class="page-panel">
            <h3 class="page-title margin-bottom-lg"> @ViewBag.Title </h3>
            <div class="list-search" id="elementToToggle">
                <div class="row">
                    <div class="col-xl-6">
                        <div class="form-group">
                            <label class="form-label" >
                                الخدمة الرئيسية
                            </label>
                            @if (ViewData["category"] != null)
                            {
                                var category = (CommonEServiceDto)ViewData["category"];
                                

                                <label class="form-label">
                                    (@category.NameAr)
                                </label>
                            }
                        </div>
                    </div>
                </div>
                

            </div>
            @if (ViewData["subcategories"] != null)
            {
                var subcategories = (List<EServiceSubCategoryDto>)ViewData["subcategories"];

                <div class="idm-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>عنوان الخدمة</th>
                                <th>حالة الخدمة</th>
                                <th >خيارات الخدمات</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var request in subcategories)
                            {
                                <tr>
                                    <td>@(request.NameAr ?? "--")</td>
                                    @if (request.IsActive)
                                    {

                                        <td>فعال</td>
                                    }
                                    else
                                    {
                                        <td>غير فعال</td>
                                    }

                                    <td>
                                        <a class="btn btn-sm" asp-action="ActivateSubcategory" asp-route-serviceId="@request.Id" asp-route-status="@request.IsActive">
                                            @if (request.IsActive)
                                            {

                                                <span>الغاء التفعيل</span>
                                            }
                                            else
                                            {
                                                <span> تفعيل</span>
                                            }
                                        </a>
                                       
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

            }

            else
            {
                <div class="empty-state">
                    <div class="empty-state__icon">
                        <svg>
                            <use xlink:href="/assets/images/svg-icons.svg#no-search-result"></use>
                        </svg>
                    </div>
                    <div class="empty-state__title"> لا يوجد بيانات </div>
                </div>
            }
            @* <div class="margin-top-xxl">
            @await Html.PartialAsync("Common/Pager", new Pager { Action = "RequestList", PageSize = 10, TotalCount = Model.TotalItemsCount, EnableSearch = true, Search = ViewBag.Search })
            </div> *@
        </div>
    </div>
</div>