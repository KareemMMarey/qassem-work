
@using QassimPrincipality.Web.Helpers.TagHelpers
@using QassimPrincipality.Application.Services.Lookups.Main.EServiceCategory

@{
    ViewBag.Title = "قائمة الخدمات الرئيسية";
    Layout = "_Layout";
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">الرئيسية</a></li>
        <li class="breadcrumb-item active"> @ViewBag.Title</li>
    </ol>
</nav>

<div class="row justify-content-xxl-center">
    <div class="col-xxl-12">
        <div class="page-panel">
            <h3 class="page-title margin-bottom-lg"> @ViewBag.Title </h3>
            <div class="list-search" id="elementToToggle">
                <a class="btn btn-sm" asp-action="CreateCategory">
                   إضافة جديد
                </a>

            </div>
            @if (ViewData["categories"] != null)
            {
                var categories = (List<EServiceCategoryDto>)ViewData["categories"];

                <div class="idm-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>عنوان الخدمة</th>
                                <th>حالة الخدمة</th>
                                <th style="width:80px"></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var request in categories)
                            {
                                <tr>
                                    <td>@(request.NameAr ?? "--")</td>
                                    @if (request.IsActive)
                                    {

                                        <td>فعال</td>
                                    }
                                    else
                                    {
                                        <td>غير فعال</td>
                                    }

                                    <td>
                                        <a class="btn btn-sm" asp-action="Activate" asp-route-serviceId="@request.Id" asp-route-status="@request.IsActive">
                                            @if (request.IsActive)
                                            {

                                             <span>الغاء التفعيل</span>
                                            }
                                            else
                                            {
                                                <span> تفعيل</span>
                                            }
                                        </a>
                                        <a class="btn btn-sm" asp-action="CreateSubCategory" asp-route-categoryId="@request.Id">
                                            إضافة خدمة فرعية
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                
            }
            
            else
            {
                <div class="empty-state">
                    <div class="empty-state__icon">
                        <svg>
                            <use xlink:href="/assets/images/svg-icons.svg#no-search-result"></use>
                        </svg>
                    </div>
                    <div class="empty-state__title"> لا يوجد بيانات </div>
                </div>
            }
            @* <div class="margin-top-xxl">
                @await Html.PartialAsync("Common/Pager", new Pager { Action = "RequestList", PageSize = 10, TotalCount = Model.TotalItemsCount, EnableSearch = true, Search = ViewBag.Search })
            </div> *@
        </div>
    </div>
</div>