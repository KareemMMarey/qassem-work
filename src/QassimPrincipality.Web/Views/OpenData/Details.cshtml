@model QassimPrincipality.Application.Services.Main.OpenData.OpenDataDto

@{
    ViewData["Title"] = "Details";
}

<div>
    <a asp-action="RequestList">عرض الكل</a>
    <button class="btn btn-danger float-right" onclick="window.print()" formaction="Accept">طباعه</button>
</div>

<div class="page-panel">
    <div class="request-details">
        <header class="request-details__header">
            <h2 class="request-details__title">
                تفاصيل طلب البيانات المفتوحة  -  <span> @Html.DisplayFor(model => model.Title) </span>
            </h2>
            @*  <div class="request-details__number">
            رقم#  <span> @Html.DisplayFor(model => model.referralNumber) </span>
            </div> *@
        </header>
        <div class="row justify-content-xxl-center">
            <div class="col-xxl-10">
                <div class="request-details__content">
                    <div class="card">
                        <div class="card-body">
                            <div class="request-details__header">
                                <h3 class="request-details__title">
                                    بيانات مقدم الطلب
                                </h3>
                            </div>
                            <div class="row g-3">
                                <div class="col-lg-4"><span class="color-primary font-bold">مقدم الطلب </span>@Html.DisplayFor(model => model.UserFullName)</div>
                                <div class="col-lg-4"><span class="color-primary font-bold">رقم الهوية </span>@Html.DisplayFor(model => model.IdentityNumber)</div>
                                <div class="col-lg-4"><span class="color-primary font-bold">رقم الهاتف </span>@Html.DisplayFor(model => model.UserMobile)</div>
                                <div class="col-lg-4"><span class="color-primary font-bold">البريد الإلكتروني </span>@Html.DisplayFor(model => model.UserEmail)</div>
                                <div class="col-lg-12"><span class="color-primary font-bold">نوع مقدم الطلب </span>@Html.DisplayFor(model => model.RequesterTypeName)</div>

                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="request-details__header">
                                <h3 class="request-details__title">
                                    بيانات الطلب
                                </h3>
                            </div>
                            <div class="row g-3">
                                <div class="col-lg-4"><span class="color-primary font-bold">عنوان الطلب </span>@Html.DisplayFor(model => model.Title)</div>
                                <div class="col-lg-4"><span class="color-primary font-bold">تاريخ الطلب </span>@Html.DisplayFor(model => model.CreatedOn)</div>
                                <div class="col-lg-4"><span class="color-primary font-bold">وصف الطلب </span>@Html.DisplayFor(model => model.Description)</div>
                            </div>
                        </div>
                    </div>

                    @switch (Model.IsApproved)
                    {
                        case null:
                            if (User.IsInRole("OpenDataRequestAdmin"))
                            {
                                <form asp-controller="OpenData" asp-action="" method="post">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="form-group">
                                                <label class="form-label" for="RequestName">ملاحظات	</label>
                                                <input class="form-control" type="text" data-val="true" required data-val-required="هذا الحقل مطلوب" id="rejectReasons" name="rejectReasons" value="">
                                                <input class="form-control" type="text" value="@Model.Id" id="requestId" name="requestId" hidden>
                                                <span class="text-danger field-validation-valid" data-valmsg-for="rejectReasons" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-2 justify-content-between margin-top-lg">
                                        <div class="d-flex gap-2">
                                            <input class="btn btn-success" type="submit" value="قبول" formaction="Accept" />
                                            <input class="btn btn-outline-danger" type="submit" value="رفض" formaction="Reject" />
                                        </div>
                                        <a asp-action="RequestList" class="btn btn-outline-primary">رجوع</a>
                                    </div>
                                </form>

                            }
                          
                            break;
                        case true:
                            break;
                        case false:
                            <div class="card">
                                <div class="card-body">
                                    <div class="request-details__header">
                                        <h3 class="request-details__title">
                                            أسباب الرفض
                                        </h3>
                                    </div>
                                    <div>
                                        @Html.DisplayFor(model => model.RejectReason)
                                    </div>
                                </div>
                            </div>
                            break;
                    }
                </div>
            </div>
        </div>
    </div>
</div>