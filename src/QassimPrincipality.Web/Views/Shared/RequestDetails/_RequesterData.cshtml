@model QassimPrincipality.Application.Dtos.ServiceRequestDto
@{
    // Try to pull the parent’s Localizer out of ViewData
    var Localizer = ViewData["ParentLocalizer"] as IViewLocalizer
                    ?? throw new InvalidOperationException("ParentLocalizer not found.");
    string FormatDate(DateTime date) => date == DateTime.MinValue ? Localizer["NotFound"].Value : date.ToString("yyyy-MM-dd");
    string GetValue(string val) => string.IsNullOrEmpty(val) ? Localizer["NotFound"].Value : val;

}


@using QassimPrincipality.Domain.Enums


<div class="section‐box">
    <h5 class="mb-3">@Localizer["ApplicantData"]</h5> @* مفتاح جديد: "ApplicantData" => "بيانات مقدم الطلب" *@
    <table class="table table-bordered table‐rtl">
        <tbody>
            <tr>
                <th style="width: 30%;">@Localizer["FullName"]</th>
                <td>@GetValue(Model.BasicData.FullName)</td>
                <th style="width: 30%;">@Localizer["Nationality"]</th>
                <td>@GetValue(Model.BasicData.Nationality)</td>
            </tr>
            <tr>
                <th>@Localizer["IDNumber"]</th>
                <td>@GetValue(Model.BasicData.IdNumber)</td>
                <th>@Localizer["BirthDate"]</th>
                <td>@FormatDate(Model.BasicData.BirthDate)</td>
            </tr>
            <tr>
                <th>@Localizer["PhoneNumber"]</th>
                <td>@GetValue(Model.BasicData.Phone)</td>
                <th>@Localizer["mail"]</th>
                <td>@GetValue(Model.BasicData.Email)</td>
            </tr>
            <tr>
                <th>@Localizer["City"]</th>
                <td>@GetValue(Model.BasicData.City)</td>
                <th>@Localizer["District"]</th>
                <td>@GetValue(Model.BasicData.District)</td>
            </tr>
            @if (Model.ServiceRequesterRelation != ServiceRequesterRelation.MySelf)
            {
                <tr>
                    <th>@Localizer["RequesterRelation"]</th>
                    <td>@Localizer[$"Relation_{Model.ServiceRequesterRelation}"]</td>

                </tr>
            }
        </tbody>
    </table>
</div>

