@inject IViewLocalizer localizer

@{

    
    var currentCulture = System.Globalization.CultureInfo.CurrentCulture.Name;
}

<style>
    .required {
        border-left: 3px solid #dc3545;
        padding-left: 10px;
    }

    .required-file::after {
        content: " *";
        color: #dc3545;
    }
</style>
<div class="card p-4">
    <h5>@localizer["Attachments"] </h5>

    @if (Model != null && Model.Count>0)
    {
        <ul class="list-group mb-3">
            @foreach (var attachmentType in Model)
            {
                <li class="list-group-item @(attachmentType.IsMandatory ? "required" : "")">
                    <label>
                        @attachmentType.NameAr / @attachmentType.NameEn
                        @if (attachmentType.IsMandatory)
                        {
                            <span class="text-danger">*</span>
                        }
                       
                    </label>
                    <input type="file"
                           id="attachment-@attachmentType.Id"
                           class="form-control attachment-input @(attachmentType.IsMandatory ? "required-file" : "")"
                           data-attachment-id="@attachmentType.Id"
                           data-max-size="@attachmentType.MaxSizeMB"
                           data-allowed-extensions="@attachmentType.AllowedExtensions"
                           multiple />
                    

                    <small class="text-muted mt-1 d-block">
                        @localizer["AttachmentInfo", attachmentType.MaxSizeMB, attachmentType.AllowedExtensions]
                    </small>
                    <ul id="uploaded-files-@attachmentType.Id" class="mt-2 uploaded-files"></ul>
                </li>
            }
        </ul>
    }
    else
    {
        <p>@localizer["Noattachmentsrequired"] </p>
    }
</div>
<script>
    const attachmentmessages = {
        fileSizeExceeded: '@localizer["FileSizeExceeded", "{0}", "{1}"]'.replace("{0}", "{0}").replace("{1}", "{1}"),
        unsupportedExtension: '@localizer["UnsupportedExtension", "{0}", "{1}"]'.replace("{0}", "{0}").replace("{1}", "{1}"),
        uploadFailed: '@localizer["UploadFailed"]',
        successUploadMessage: '@localizer["SuccessUploadMessage"]'
    };
</script>
<script src="/js/attachment-manager.js?v=007"></script>
